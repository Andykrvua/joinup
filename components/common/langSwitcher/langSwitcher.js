import styles from './langSwitcher.module.css';
import { useRouter } from 'next/router';
import { useState, useEffect } from 'react';

export default function LangSwitcher() {
  const router = useRouter();
  const { pathname, asPath, query, locale } = router;
  const [lang, setLang] = useState(locale);

  useEffect(() => {
    if (locale === lang) {
      return;
    }
    router.push({ pathname, query }, asPath, { locale: lang });
  }, [lang]);

  return (
    <div className={styles.lang_switcher}>
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none">
        <path
          fill="#fff"
          d="M16.766 3.234A9.5 9.5 0 0 0 10 .43a9.5 9.5 0 0 0-6.766 2.804A9.522 9.522 0 0 0 .43 10a9.5 9.5 0 0 0 2.804 6.766A9.522 9.522 0 0 0 10 19.57a9.5 9.5 0 0 0 6.766-2.804A9.522 9.522 0 0 0 19.57 10a9.5 9.5 0 0 0-2.804-6.766Zm1.937 6.336h-3.71c-.036-1.476-.243-2.898-.606-4.16a9.49 9.49 0 0 0 1.972-1.36 8.69 8.69 0 0 1 2.344 5.52Zm-8.273.86h3.707a15.707 15.707 0 0 1-.543 3.824 9.663 9.663 0 0 0-3.164-.688V10.43Zm5.312-6.977c-.5.442-1.047.817-1.625 1.129a9.971 9.971 0 0 0-.504-1.172c-.37-.734-.793-1.336-1.258-1.797a8.676 8.676 0 0 1 3.387 1.84ZM10.43 1.422c.894.2 1.738 1.023 2.418 2.367.183.363.347.75.492 1.16a8.766 8.766 0 0 1-2.91.653v-4.18Zm3.168 4.351c.32 1.157.504 2.45.535 3.801H10.43v-3.11a9.667 9.667 0 0 0 3.168-.69ZM9.57 9.57H5.863c.032-1.351.215-2.644.535-3.8 1 .406 2.07.64 3.168.687V9.57h.004Zm.004-8.148v4.18a8.745 8.745 0 0 1-2.91-.653c.145-.41.309-.797.492-1.16.68-1.344 1.524-2.168 2.418-2.367Zm-1.926.191c-.464.461-.886 1.067-1.257 1.797a11.49 11.49 0 0 0-.504 1.172 8.832 8.832 0 0 1-1.625-1.129 8.676 8.676 0 0 1 3.386-1.84ZM3.645 4.051c.605.539 1.265.992 1.972 1.36a16.466 16.466 0 0 0-.605 4.16H1.3a8.691 8.691 0 0 1 2.344-5.52ZM1.3 10.43h3.71c.036 1.488.247 2.914.614 4.183a9.408 9.408 0 0 0-1.965 1.352A8.678 8.678 0 0 1 1.3 10.43Zm2.976 6.133a8.736 8.736 0 0 1 1.618-1.122c.148.403.312.79.496 1.149.37.734.793 1.336 1.257 1.8a8.719 8.719 0 0 1-3.37-1.828Zm5.297 2.015c-.894-.2-1.738-1.023-2.418-2.367a10.03 10.03 0 0 1-.484-1.137 8.623 8.623 0 0 1 2.902-.648v4.152ZM6.41 14.254a15.709 15.709 0 0 1-.543-3.824h3.707v3.136a9.468 9.468 0 0 0-3.164.688Zm4.024 4.324v-4.152c1.007.05 1.988.27 2.902.648a10.04 10.04 0 0 1-.484 1.137c-.68 1.344-1.524 2.168-2.418 2.367Zm1.925-.191c.465-.461.887-1.067 1.258-1.801.184-.36.348-.746.496-1.148a8.737 8.737 0 0 1 1.617 1.12 8.618 8.618 0 0 1-3.37 1.829Zm3.993-2.422a9.56 9.56 0 0 0-1.965-1.352c.367-1.27.578-2.699.613-4.183h3.71a8.718 8.718 0 0 1-2.358 5.535Z"
        />
      </svg>

      <button className={lang === 'uk' ? styles.active : null} onClick={() => setLang('uk')}>
        Ua
      </button>
      <button className={lang === 'ru' ? styles.active : null} onClick={() => setLang('ru')}>
        Ru
      </button>
    </div>
  );
}
